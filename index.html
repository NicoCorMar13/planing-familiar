<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="manifest" href="./manifest.json">
  <link rel="stylesheet" href="estilos.css">
  <link rel="icon" href="icono-192.png" type="image/png" sizes="32x32"/>
  <title>Planning Familiar</title>
</head>
<body>
  <h1>Planning semanal</h1>

  <div class="top">
    <span class="pill">Código familia</span>
    <input id="fam" placeholder="pega aquí el código" style="min-width:280px" />
    <button id="btnSetFam">Guardar</button>
    <button id="btnPush">Activar notificaciones</button>
  </div>

  <p class="muted">
    Consejo: en móvil, usa “Instalar app” (PWA) para que las notificaciones sean más fiables.
  </p>

  <div id="list"></div>

  <section class="card">
    <div class="header-row">
      <h2>Lista de la compra</h2>
      <div>
        <span id="shoppingTotal">Total: 0,00 €</span><!---->
        <button id="btnEliminar" class="btn danger" type="button">Eliminar</button>
      </div>
    </div>

    <div class="row-add">
      <input id="inpProducto" type="text" placeholder="Añade un producto…" autocomplete="off" />
      <input id="inpCantidad" type="text" placeholder="Cantidad (ej: 1, 2, 3...)" /><!---->
      <input id="inpPrecio" type="number" step="0.01" min="0" placeholder="€/ud o €/kg" /><!---->
      <button id="btnAdd" class="btn primary" type="button">Añadir</button>
    </div>

    <ul id="listaCompra" class="list"></ul>

    <p class="hint">Marca con el checkbox y pulsa “Eliminar”.</p>
  </section>

  <section class="card" id="budgetCard">
    <div class="header-row">
      <h2>Presupuesto mensual</h2>
      <button id="btnClearExpenses" class="btn danger" type="button">Limpiar gastos</button>
    </div>

    <div class="row-add">
      <input id="inpBudget" type="number" step="0.01" min="0" placeholder="Presupuesto del mes (€)" />
      <button id="btnSaveBudget" class="btn primary" type="button">Guardar</button>
    </div>

    <div class="pill" style="margin-top:10px">
      <strong>Mes:</strong> <span id="budgetMonthLabel"></span> ·
      <strong>Restante:</strong> <span id="budgetRemaining">—</span>
    </div>

    <div class="row-add" style="margin-top:12px">
      <input id="inpPlace" type="text" placeholder="Lugar (Mercadona, gasolinera…)" />
      <input id="inpAmount" type="number" step="0.01" min="0" placeholder="Cantidad (€)" />
      <button id="btnAddExpense" class="btn primary" type="button">Añadir</button>
    </div>

    <ul id="expensesList" class="list"></ul>
  </section>


  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script src="./supabaseClient.js"></script>
  <script src="./main.js"></script>
</body>
</html>
